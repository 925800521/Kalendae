/********************************************************************
 *	Kalendae, a framework agnostic javascript date picker           *
 *	Copyright(c) 2012 Jarvis Badgley (chipersoft@gmail.com)         *
 *	http://github.com/ChiperSoft/Kalendae                           *
 *	Version 0.3                                                     *
 ********************************************************************/

<<<<<<< HEAD
(function(){var t,q=function(a,b){if("function"===typeof document.addEventListener||f.isIE8()){var c=!1;try{c=a instanceof Element}catch(e){c=!!a&&1===c.nodeType}c||"string"===typeof a||(b=a);var d=this,g=d.classes,l=d.settings=f.merge(d.defaults,{attachTo:a},b||{}),c=d.container=f.make("div",{"class":g.container}),h=d.calendars=[],w=j().day(l.weekStart),n,o=[],m,k,x;m=[];var p;k=0;n=l.months;f.isIE8()&&f.addClassName(c,"ie8");for(k=7;k--;)o.push(w.format("ddd").substr(0,l.columnHeaderLength)),w.add("days",
1);K(d);if("object"===typeof l.subscribe)for(k in l.subscribe)l.subscribe.hasOwnProperty(k)&&d.subscribe(k,l.subscribe[k]);d._sel=[];l.selected&&d.setSelected(l.selected,!1);n=l.viewStartDate?j(l.viewStartDate,l.format):0<d._sel.length?j(d._sel[0]):j();d.viewStartDate=n.date(1);if((n={past:l.months-1,"today-past":l.months-1,any:2<l.months?Math.floor(l.months/2):0,"today-future":0,future:0}[this.settings.direction])&&j().month()==j(d.viewStartDate).month())d.viewStartDate=j(d.viewStartDate).subtract({M:n}).date(1);
if("function"===typeof l.blackout)d.blackout=l.blackout;else if(l.blackout){var q=E(l.blackout,l.parseSplitDelimiter);d.blackout=function(a){a=j(a).yearDay();if(1>a||!d._sel||1>d._sel.length)return!1;for(var c=q.length;c--;)if(q[c].yearDay()===a)return!0;return!1}}else d.blackout=function(){return!1};d.direction=d.directions[l.direction]?d.directions[l.direction]:d.directions.any;for(n=Math.max(l.months,1);n--;){m=f.make("div",{"class":g.calendar},c);m.setAttribute("data-cal-index",n);1<l.months&&
(n==Math.max(l.months-1,1)?f.addClassName(m,g.monthFirst):0===n?f.addClassName(m,g.monthLast):f.addClassName(m,g.monthMiddle));k=f.make("div",{"class":g.title},m);l.useYearNav||f.addClassName(k,g.disableYearNav);f.make("a",{"class":g.previousYear},k);f.make("a",{"class":g.previousMonth},k);f.make("a",{"class":g.nextYear},k);f.make("a",{"class":g.nextMonth},k);w=f.make("span",{"class":g.caption},k);x=f.make("div",{"class":g.header},m);k=0;do p=f.make("span",{},x),p.innerHTML=o[k];while(7>++k);x=f.make("div",
{"class":g.days},m);k=0;for(m=[];42>k++;)m.push(f.make("span",{},x));h.push({caption:w,days:m});n&&f.make("div",{"class":g.monthSeparator},c)}d.draw();f.addEvent(c,"mousedown",function(a,c){var b;if(f.hasClassName(c,g.nextMonth))!d.disableNext&&!1!==d.publish("view-changed",d,["next-month"])&&(d.viewStartDate.add("months",1),d.draw());else if(f.hasClassName(c,g.previousMonth))!d.disablePreviousMonth&&!1!==d.publish("view-changed",d,["previous-month"])&&(d.viewStartDate.subtract("months",1),d.draw());
else if(f.hasClassName(c,g.nextYear))!d.disableNext&&!1!==d.publish("view-changed",d,["next-year"])&&(d.viewStartDate.add("years",1),d.draw());else if(f.hasClassName(c,g.previousYear))!d.disablePreviousMonth&&!1!==d.publish("view-changed",d,["previous-year"])&&(d.viewStartDate.subtract("years",1),d.draw());else if(f.hasClassName(c.parentNode,g.days)&&f.hasClassName(c,g.dayActive)&&(b=c.getAttribute("data-date")))if(b=j(b,l.dayAttributeFormat).hours(12),!1!==d.publish("date-clicked",d,[b]))switch(l.mode){case "multiple":d.addSelected(b)||
d.removeSelected(b);break;case "range":d.addSelected(b);break;default:d.addSelected(b)}return!1});(l.attachTo=f.$(l.attachTo))&&l.attachTo.appendChild(c)}};q.prototype={defaults:{attachTo:null,months:1,weekStart:0,direction:"any",directionScrolling:!0,viewStartDate:null,blackout:null,selected:null,mode:"single",dayOutOfMonthClickable:!1,format:null,subscribe:null,columnHeaderLength:2,titleFormat:"MMMM, YYYY",dayNumberFormat:"D",dayAttributeFormat:"YYYY-MM-DD",parseSplitDelimiter:/,\s*|\s+-\s+/,rangeDelimiter:" - ",
multipleDelimiter:", ",useYearNav:!0,dateClassMap:{}},classes:{container:"kalendae",calendar:"k-calendar",monthFirst:"k-first-month",monthMiddle:"k-middle-month",monthLast:"k-last-month",title:"k-title",previousMonth:"k-btn-previous-month",nextMonth:"k-btn-next-month",previousYear:"k-btn-previous-year",nextYear:"k-btn-next-year",caption:"k-caption",header:"k-header",days:"k-days",dayOutOfMonth:"k-out-of-month",dayInMonth:"k-in-month",dayActive:"k-active",daySelected:"k-selected",dayInRange:"k-range",
dayToday:"k-today",monthSeparator:"k-separator",disablePreviousMonth:"k-disable-previous-month-btn",disableNextMonth:"k-disable-next-month-btn",disablePreviousYear:"k-disable-previous-year-btn",disableNextYear:"k-disable-next-year-btn",disableYearNav:"k-disable-year-nav"},disablePreviousMonth:!1,disableNextMonth:!1,disablePreviousYear:!1,disableNextYear:!1,directions:{past:function(a){return j(a).yearDay()>=t.yearDay()},"today-past":function(a){return j(a).yearDay()>t.yearDay()},any:function(){return!1},
"today-future":function(a){return j(a).yearDay()<t.yearDay()},future:function(a){return j(a).yearDay()<=t.yearDay()}},getSelectedAsDates:function(){for(var a=[],b=0,c=this._sel.length;b<c;b++)a.push(this._sel[b].toDate());return a},getSelectedAsText:function(a){for(var b=[],c=0,e=this._sel.length;c<e;c++)b.push(this._sel[c].format(a||this.settings.format||"YYYY-MM-DD"));return b},getSelectedRaw:function(){for(var a=[],b=0,c=this._sel.length;b<c;b++)a.push(j(this._sel[b]));return a},getSelected:function(a){a=
this.getSelectedAsText(a);switch(this.settings.mode){case "range":return a.splice(2),a.join(this.settings.rangeDelimiter);case "multiple":return a.join(this.settings.multipleDelimiter);default:return a[0]}},isSelected:function(a){a=j(a).yearDay();if(1>a||!this._sel||1>this._sel.length)return!1;switch(this.settings.mode){case "range":var b=this._sel[0]?this._sel[0].yearDay():0,c=this._sel[1]?this._sel[1].yearDay():0;return b===a||c===a?1:!b||!c?0:a>b&&a<c||b<c&&a<b&&a>c?-1:!1;case "multiple":for(b=
this._sel.length;b--;)if(this._sel[b].yearDay()===a)return!0;return!1;default:return this._sel[0]&&this._sel[0].yearDay()===a}},setSelected:function(a,b){this._sel=E(a,this.settings.parseSplitDelimiter,this.settings.format);this._sel.sort(function(a,b){return a.yearDay()-b.yearDay()});!1!==b&&this.draw()},addSelected:function(a,b){a=j(a).hours(12);this.settings.dayOutOfMonthClickable&&"range"!==this.settings.mode&&this.makeSelectedDateVisible(a);switch(this.settings.mode){case "multiple":if(this.isSelected(a))return!1;
this._sel.push(a);break;case "range":1!==this._sel.length?this._sel=[a]:a.yearDay()>this._sel[0].yearDay()?this._sel[1]=a:this._sel=[a,this._sel[0]];break;default:this._sel=[a]}this._sel.sort(function(a,b){return a.yearDay()-b.yearDay()});this.publish("change",this);!1!==b&&this.draw();return!0},makeSelectedDateVisible:function(a){outOfViewMonth=j(a).date("1").diff(this.viewStartDate,"months");0>outOfViewMonth?this.viewStartDate.subtract("months",1):0<outOfViewMonth&&outOfViewMonth>=this.settings.months&&
this.viewStartDate.add("months",1)},removeSelected:function(a,b){for(var a=j(a).yearDay(),c=this._sel.length;c--;)if(this._sel[c].yearDay()===a)return this._sel.splice(c,1),this.publish("change",this),!1!==b&&this.draw(),!0;return!1},draw:function(){var a=j(this.viewStartDate).hours(12),b,c=this.classes,e,d,g,l=0,h,p=0,n,o=this.settings;h=this.calendars.length;do{b=j(a).date(1);b.day(b.day()<this.settings.weekStart?this.settings.weekStart-7:this.settings.weekStart);e=this.calendars[l];e.caption.innerHTML=
a.format(this.settings.titleFormat);p=0;do d=e.days[p],g=[],(n=this.isSelected(b))&&g.push({"-1":c.dayInRange,1:c.daySelected,"true":c.daySelected}[n]),b.month()!=a.month()?g.push(c.dayOutOfMonth):g.push(c.dayInMonth),(!this.blackout(b)&&!(this.direction(b)||b.month()!=a.month()&&!1===o.dayOutOfMonthClickable)||0<n)&&g.push(c.dayActive),b.yearDay()===t.yearDay()&&g.push(c.dayToday),n=b.format(this.settings.dayAttributeFormat),o.dateClassMap[n]&&g.push(o.dateClassMap[n]),d.innerHTML=b.format(o.dayNumberFormat),
d.className=g.join(" "),d.setAttribute("data-date",n),b.add("days",1);while(42>++p);a.add("months",1)}while(++l<h);if(o.directionScrolling){b=-j().diff(a,"months");if("today-past"===o.direction||"past"===o.direction)0>b?(this.disableNextMonth=!1,f.removeClassName(this.container,c.disableNextMonth)):(this.disableNextMonth=!0,f.addClassName(this.container,c.disableNextMonth));else if("today-future"===o.direction||"future"===o.direction)b>=o.months?(this.disablePreviousMonth=!1,f.removeClassName(this.container,
c.disablePreviousMonth)):(this.disablePreviousMonth=!0,f.addClassName(this.container,c.disablePreviousMonth));if("today-past"===o.direction||"past"===o.direction)0>=a.add({y:1}).diff(j(),"months")?(this.disableNextYear=!1,f.removeClassName(this.container,c.disableNextYear)):(this.disableNextYear=!0,f.addClassName(this.container,c.disableNextYear));else if("today-future"===o.direction||"future"===o.direction)0<=a.subtract({y:1}).diff(j(),"months")-(o.months-1)?(this.disablePreviousYear=!1,f.removeClassName(this.container,
c.disablePreviousYear)):(this.disablePreviousYear=!0,f.addClassName(this.container,c.disablePreviousYear))}}};var E=function(a,b,c){var e=[];"string"===typeof a?a=a.split(b):f.isArray(a)||(a=[a]);b=a.length;i=0;do a[i]&&e.push(j(a[i],c).hours(12));while(++i<b);return e};window.Kalendae=q;var f=q.util={isIE8:function(){return!(!/msie 8./i.test(navigator.appVersion)||/opera/i.test(navigator.userAgent)||!window.ActiveXObject||!XDomainRequest||window.msPerformance)},$:function(a){return"string"==typeof a?
document.getElementById(a):a},$$:function(a){return document.querySelectorAll(a)},make:function(a,b,c){var e,a=document.createElement(a);if(b)for(e in b)b.hasOwnProperty(e)&&a.setAttribute(e,b[e]);c&&c.appendChild(a);return a},isVisible:function(a){return 0<a.offsetWidth||0<a.offsetHeight},getStyle:function(a,b){var c;a.currentStyle?c=a.currentStyle[b]:window.getComputedStyle&&(c=window.getComputedStyle(a,null)[b]);return c},domReady:function(a){/in/.test(document.readyState)?setTimeout(function(){f.domReady(a)},
9):a()},addEvent:function(a,b,c){var e=function(b){var b=b||window.event,e=c.apply(a,[b,b.target||b.srcElement]);!1===e&&(b.preventDefault?b.preventDefault():(b.returnValue=!1,b.cancelBubble=!0));return e};a.attachEvent?a.attachEvent("on"+b,e):a.addEventListener(b,e,!1);return e},removeEvent:function(a,b,c){a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener(b,c,!1)},hasClassName:function(a,b){if(!(a=f.$(a)))return!1;var c=a.className;return 0<c.length&&(c==b||RegExp("(^|\\s)"+b+"(\\s|$)").test(c))},
addClassName:function(a,b){if((a=f.$(a))&&!f.hasClassName(a,b))a.className+=(a.className?" ":"")+b},removeClassName:function(a,b){if(a=f.$(a))a.className=f.trimString(a.className.replace(RegExp("(^|\\s+)"+b+"(\\s+|$)")," "))},isFixed:function(a){do if("fixed"===f.getStyle(a,"position"))return!0;while(a=a.offsetParent);return!1},scrollContainer:function(a){do{var b=f.getStyle(a,"overflow");if("auto"===b||"scroll"===b)return a}while((a=a.parentNode)&&a!=window.document.body);return null},getPosition:function(a,
b){var c=a.offsetLeft,e=a.offsetTop,d={};if(!b)for(;a=a.offsetParent;)c+=a.offsetLeft,e+=a.offsetTop;d[0]=d.left=c;d[1]=d.top=e;return d},getHeight:function(a){return a.offsetHeight||a.scrollHeight},getWidth:function(a){return a.offsetWidth||a.scrollWidth},trimString:function(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")},merge:function(){for(var a=!0===arguments[0],b={},c=a?1:0;c<arguments.length;c++){var e=b,d=arguments[c];if("object"===typeof d){var g=void 0;for(g in d)d.hasOwnProperty(g)&&
(a&&"object"===typeof e[g]&&"object"===typeof d[g]?_update(e[g],d[g]):e[g]=d[g])}}return b},isArray:function(a){return!(!a||!a.length||0===a.length||"object"!==typeof a||!a.constructor||a.nodeType||a.item)}};"function"===typeof document.addEventListener&&q.util.domReady(function(){for(var a=f.$$(".auto-kal"),b=a.length,c,e;b--;)c=a[b],e=c.getAttribute("data-kal"),e=null==e||""==e?{}:(new Function("return {"+e+"};"))(),"INPUT"===c.tagName?new q.Input(c,e):new q(f.merge(e,{attachTo:c}))});q.Input=function(a,
b){if("function"===typeof document.addEventListener||f.isIE8()){var c=this.input=f.$(a),e;if(!c||"INPUT"!==c.tagName)throw"First argument for Kalendae.Input must be an <input> element or a valid element id.";var d=this,g=d.classes;opts=d.settings=f.merge(d.defaults,b);opts.attachTo=window.document.body;opts.selected?e=!0:opts.selected=c.value;q.call(d,opts);if(opts.closeButton){var l=f.make("a",{"class":g.closeButton},d.container);f.addEvent(l,"click",function(){c.blur()})}e&&(c.value=d.getSelected());
e=d.container;var h=!1;e.style.display="none";f.addClassName(e,g.positioned);f.addEvent(e,"mousedown",function(){h=true});f.addEvent(window.document,"mousedown",function(){h=false});f.addEvent(c,"focus",function(){d.setSelected(this.value);d.show()});f.addEvent(c,"blur",function(){if(h){h=false;c.focus()}else d.hide()});f.addEvent(c,"keyup",function(){d.setSelected(this.value)});(g=f.scrollContainer(c))&&f.addEvent(g,"scroll",function(){c.blur()});d.subscribe("change",function(){c.value=d.getSelected()})}};
q.Input.prototype=f.merge(q.prototype,{defaults:f.merge(q.prototype.defaults,{format:"MM/DD/YYYY",side:"bottom",closeButton:!0,offsetLeft:0,offsetTop:0}),classes:f.merge(q.prototype.classes,{positioned:"k-floating",closeButton:"k-btn-close"}),show:function(){var a=this.container,b=a.style,c=this.input,e=f.getPosition(c),d=f.scrollContainer(c),d=d?d.scrollTop:0;b.display="";switch(opts.side){case "left":b.left=e.left-f.getWidth(a)+this.settings.offsetLeft+"px";b.top=e.top+this.settings.offsetTop-d+
"px";break;case "right":b.left=e.left+f.getWidth(c)+"px";b.top=e.top+this.settings.offsetTop-d+"px";break;case "top":b.left=e.left+this.settings.offsetLeft+"px";b.top=e.top-f.getHeight(a)+this.settings.offsetTop-d+"px";break;default:b.left=e.left+this.settings.offsetLeft+"px",b.top=e.top+f.getHeight(c)+this.settings.offsetTop-d+"px"}b.position=f.isFixed(c)?"fixed":"absolute";this.publish("show",this)},hide:function(){this.container.style.display="none";this.publish("hide",this)}});var K=function(a){a||
(a=this);var b=a.c_||{};a.publish=function(a,e,d){for(var g=(a=b[a])?a.length:0,f;g--;)if(f=a[g].apply(e,d||[]),"boolean"===typeof f)return f};a.subscribe=function(a,e,d){b[a]||(b[a]=[]);d?b[a].push(e):b[a].unshift(e);return[a,e]};a.unsubscribe=function(a){for(var e=b[a[0]],a=a[1],d=e?e.length:0;d--;)e[d]===a&&e.splice(d,1)}},p=Date,u=function(a,b){this._d=a;this._isUTC=!!b},r=function(a,b){for(var c=a+"";c.length<b;)c="0"+c;return c},F=function(a,b,c,e){var d="string"===typeof b,g=d?{}:b;d&&e&&(g[b]=
+e);b=(g.ms||g.milliseconds||0)+1E3*(g.s||g.seconds||0)+6E4*(g.m||g.minutes||0)+36E5*(g.h||g.hours||0);e=(g.d||g.days||0)+7*(g.w||g.weeks||0);g=(g.M||g.months||0)+12*(g.y||g.years||0);b&&a.setTime(+a+b*c);e&&a.setDate(a.getDate()+e*c);g&&(b=a.getDate(),a.setDate(1),a.setMonth(a.getMonth()+g*c),a.setDate(Math.min((new p(a.getFullYear(),a.getMonth()+1,0)).getDate(),b)));return a},y=function(a){return"[object Array]"===Object.prototype.toString.call(a)},G=function(a){return new p(a[0],a[1]||0,a[2]||
1,a[3]||0,a[4]||0,a[5]||0,a[6]||0)},z=function(a,b){function c(b){var s;switch(b){case "M":return e+1;case "Mo":return e+1+m(e+1);case "MM":return r(e+1,2);case "MMM":return h.monthsShort[e];case "MMMM":return h.months[e];case "D":return d;case "Do":return d+m(d);case "DD":return r(d,2);case "DDD":return b=new p(g,e,d),s=new p(g,0,1),~~((b-s)/864E5+1.5);case "DDDo":return b=c("DDD"),b+m(b);case "DDDD":return r(c("DDD"),3);case "d":return f;case "do":return f+m(f);case "ddd":return h.weekdaysShort[f];
case "dddd":return h.weekdays[f];case "w":return b=new p(g,e,d-f+5),s=new p(b.getFullYear(),0,4),~~((b-s)/864E5/7+1.5);case "wo":return b=c("w"),b+m(b);case "ww":return r(c("w"),2);case "YY":return r(g%100,2);case "YYYY":return g;case "a":return 11<j?k.pm:k.am;case "A":return 11<j?k.PM:k.AM;case "H":return j;case "HH":return r(j,2);case "h":return j%12||12;case "hh":return r(j%12||12,2);case "m":return q;case "mm":return r(q,2);case "s":return n;case "ss":return r(n,2);case "zz":case "z":return(a._d.toString().match(L)||
[""])[0].replace(M,"");case "Z":return(0>o?"-":"+")+r(~~(Math.abs(o)/60),2)+":"+r(~~(Math.abs(o)%60),2);case "ZZ":return(0>o?"-":"+")+r(~~(10*Math.abs(o)/6),4);case "L":case "LL":case "LLL":case "LLLL":case "LT":return z(a,h.longDateFormat[b]);default:return b.replace(/(^\[)|(\\)|\]$/g,"")}}var e=a.month(),d=a.date(),g=a.year(),f=a.day(),j=a.hours(),q=a.minutes(),n=a.seconds(),o=-a.zone(),m=h.ordinal,k=h.meridiem;return b.replace(N,c)},B=function(a,b){var c=[0,0,1,0,0,0,0],e=0,d=0,g=!1,f=a.match(A),
j=b.match(O),q=Math.min(f.length,j.length),n,o;for(n=0;n<q;n++){var m=f[n],k=void 0;switch(j[n]){case "M":case "MM":c[1]=~~m-1;break;case "MMM":case "MMMM":for(k=0;12>k;k++)if(h.monthsParse[k].test(m)){c[1]=k;break}break;case "D":case "DD":case "DDD":case "DDDD":c[2]=~~m;break;case "YY":m=~~m;c[0]=m+(70<m?1900:2E3);break;case "YYYY":c[0]=~~Math.abs(m);break;case "a":case "A":o="pm"===m.toLowerCase();break;case "H":case "HH":case "h":case "hh":c[3]=~~m;break;case "m":case "mm":c[4]=~~m;break;case "s":case "ss":c[5]=
~~m;break;case "Z":case "ZZ":g=!0,(k=(m||"").match(P))&&k[1]&&(e=~~k[1]),k&&k[2]&&(d=~~k[2]),k&&"+"===k[0]&&(e=-e,d=-d)}}o&&12>c[3]&&(c[3]+=12);!1===o&&12===c[3]&&(c[3]=0);c[3]+=e;c[4]+=d;return g?new p(p.UTC.apply({},c)):G(c)},Q=function(a,b,c){var e=h.relativeTime[a];return"function"===typeof e?e(b||1,!!c,a):e.replace(/%d/i,b||1)},H=function(a,b){h.fn[a]=function(a){var e=this._isUTC?"UTC":"";return"undefined"!==typeof a?(this._d["set"+e+b](a),this):this._d["get"+e+b]()}},h,s=Math.round,C={},R=
"undefined"!==typeof module,I="months monthsShort monthsParse weekdays weekdaysShort longDateFormat calendar relativeTime ordinal meridiem".split(" "),v,S=/^\/?Date\((\-?\d+)/i,N=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|dddd?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|zz?|ZZ?|LT|LL?L?L?)/g,M=/[^A-Z]/g,L=/\([A-Za-z ]+\)|:[0-9]{2} [A-Z]{3} /g,O=/(\\)?(MM?M?M?|dd?d?d|DD?D?D?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|ZZ?|T)/g,A=/(\\)?([0-9]+|([a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+|([\+\-]\d\d:?\d\d))/gi,
T=/\d{4}.\d\d.\d\d(T(\d\d(.\d\d(.\d\d)?)?)?([\+\-]\d\d:?\d\d)?)?/,J=[["HH:mm:ss",/T\d\d:\d\d:\d\d/],["HH:mm",/T\d\d:\d\d/],["HH",/T\d\d/]],P=/([\+\-]|\d\d)/gi,D="Month Date Hours Minutes Seconds Milliseconds".split(" ");h=function(a,b){if(null===a||""===a)return null;var c;if(a&&a._d instanceof p)c=new p(+a._d);else if(b)if(y(b)){var e=a.match(A),d=99,g,f,h;for(g=0;g<b.length;g++){f=B(a,b[g]);h=e;for(var j=z(new u(f),b[g]).match(A),n=Math.min(h.length,j.length),o=Math.abs(h.length-j.length),m=0,k=
void 0,k=0;k<n;k++)~~h[k]!==~~j[k]&&m++;h=m+o;h<d&&(d=h,c=f)}}else c=B(a,b);else if(c=S.exec(a),void 0===a)c=new p;else if(c)c=new p(+c[1]);else if(a instanceof p)c=a;else if(y(a))c=G(a);else if("string"===typeof a)if(c="YYYY-MM-DDT",T.exec(a)){for(e=0;3>e;e++)if(J[e][1].exec(a)){c+=J[e][0];break}c=B(a,c+"Z")}else c=new p(a);else c=new p(a);return new u(c)};h.utc=function(a,b){return y(a)?new u(new p(p.UTC.apply({},a)),!0):b&&a?h(a+" 0",b+" Z").utc():h(a).utc()};h.humanizeDuration=function(a,b,c){var a=
+a,e=h.relativeTime;switch(b){case "seconds":a*=1E3;break;case "minutes":a*=6E4;break;case "hours":a*=36E5;break;case "days":a*=864E5;break;case "weeks":a*=6048E5;break;case "months":a*=2592E6;break;case "years":a*=31536E6;break;default:c=!!b}var b=!c,d=s(Math.abs(a)/1E3),g=s(d/60),f=s(g/60),j=s(f/24),p=s(j/365),d=45>d&&["s",d]||1===g&&["m"]||45>g&&["mm",g]||1===f&&["h"]||22>f&&["hh",f]||1===j&&["d"]||25>=j&&["dd",j]||45>=j&&["M"]||345>j&&["MM",s(j/30)]||1===p&&["y"]||["yy",p];d[2]=b;b=Q.apply({},
d);return c?(0>=a?e.past:e.future).replace(/%s/i,b):b};h.version="1.5.0";h.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";h.lang=function(a,b){var c,e;e=[];if(b){for(c=0;12>c;c++)e[c]=RegExp("^"+b.months[c]+"|^"+b.monthsShort[c].replace(".",""),"i");b.monthsParse=b.monthsParse||e;C[a]=b}if(C[a])for(c=0;c<I.length;c++)e=I[c],h[e]=C[a][e]||h[e];else R&&(c=require("./lang/"+a),h.lang(a,c))};h.lang("en",{months:"January February March April May June July August September October November December".split(" "),monthsShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},meridiem:{AM:"AM",am:"am",PM:"PM",pm:"pm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",
m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(a){var b=a%10;return 1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th"}});h.isMoment=function(a){return a instanceof u};h.fn=u.prototype={clone:function(){return h(this)},valueOf:function(){return+this._d},"native":function(){return this._d},toString:function(){return this._d.toString()},toDate:function(){return this._d},utc:function(){this._isUTC=
!0;return this},local:function(){this._isUTC=!1;return this},format:function(a){return z(this,a?a:h.defaultFormat)},add:function(a,b){this._d=F(this._d,a,1,b);return this},subtract:function(a,b){this._d=F(this._d,a,-1,b);return this},diff:function(a,b,c){var a=h(a),e=6E4*(this.zone()-a.zone()),e=this._d-a._d-e,d=this.year()-a.year(),f=this.month()-a.month(),a=this.date()-a.date(),b="months"===b?12*d+f+a/30:"years"===b?d+f/12:"seconds"===b?e/1E3:"minutes"===b?e/6E4:"hours"===b?e/36E5:"days"===b?e/
864E5:"weeks"===b?e/6048E5:e;return c?b:s(b)},from:function(a,b){return h.humanizeDuration(this.diff(a),!b)},fromNow:function(a){return this.from(h(),a)},calendar:function(){var a=this.diff(h().sod(),"days",!0),b=h.calendar,c=b.sameElse,a=-6>a?c:-1>a?b.lastWeek:0>a?b.lastDay:1>a?b.sameDay:2>a?b.nextDay:7>a?b.nextWeek:c;return this.format("function"===typeof a?a.apply(this):a)},isLeapYear:function(){var a=this.year();return 0===a%4&&0!==a%100||0===a%400},isDST:function(){return this.zone()<h([this.year()]).zone()||
this.zone()<h([this.year(),5]).zone()},day:function(a){var b=this._d.getDay();return"undefined"===typeof a?b:this.add({d:a-b})},sod:function(){return this.clone().hours(0).minutes(0).seconds(0).milliseconds(0)},eod:function(){return this.sod().add({d:1,ms:-1})},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return this.clone().month(this.month()+1).date(0).date()}};for(v=0;v<D.length;v++)H(D[v].toLowerCase(),D[v]);H("year","FullYear");var j=q.moment=h;j.fn.stripTime=
function(){this._d=new Date(864E5*Math.floor(this._d.valueOf()/864E5));return this};j.fn.yearDay=function(a){var b=Math.floor(this._d/864E5);return"undefined"===typeof a?b:this.add({d:a-b})};t=j().stripTime();"undefined"!==typeof jQuery&&"function"===typeof document.addEventListener&&(jQuery.fn.kalendae=function(a){this.each(function(b,c){"INPUT"===c.tagName?$(c).data("kalendae",new q.Input(c,a)):$(c).data("kalendae",new q($.extend({},{attachTo:c},a)))});return this})})();
=======
(function(){var r,o=function(a,b){if("function"===typeof document.addEventListener){var d=!1;try{d=a instanceof Element}catch(e){d=!!a&&1===d.nodeType}d||"string"===typeof a||(b=a);var c=this,j=c.classes,h=c.settings=f.merge(c.defaults,{attachTo:a},b||{}),d=c.container=f.make("div",{"class":j.container}),o=c.calendars=[],u=l().day(h.weekStart),n,m=[],g,k,x;g=[];var r;k=0;n=h.months;f.isIE8()&&f.addClassName(d,"ie8");for(k=7;k--;)m.push(u.format("ddd").substr(0,h.columnHeaderLength)),u.add("days",
1);A(c);if("object"===typeof h.subscribe)for(k in h.subscribe)h.subscribe.hasOwnProperty(k)&&c.subscribe(k,h.subscribe[k]);c._sel=[];h.selected&&c.setSelected(h.selected,!1);n=h.viewStartDate?l(h.viewStartDate,h.format):0<c._sel.length?l(c._sel[0]):l();c.viewStartDate=n.date(1);if((n={past:h.months-1,"today-past":h.months-1,any:2<h.months?Math.floor(h.months/2):0,"today-future":0,future:0}[this.settings.direction])&&l().month()==l(c.viewStartDate).month())c.viewStartDate=l(c.viewStartDate).subtract({M:n}).date(1);
if("function"===typeof h.blackout)c.blackout=h.blackout;else if(h.blackout){var v=y(h.blackout,h.parseSplitDelimiter);c.blackout=function(a){a=l(a).yearDay();if(1>a||!c._sel||1>c._sel.length)return!1;for(var d=v.length;d--;)if(v[d].yearDay()===a)return!0;return!1}}else c.blackout=function(){return!1};c.direction=c.directions[h.direction]?c.directions[h.direction]:c.directions.any;for(n=Math.max(h.months,1);n--;){g=f.make("div",{"class":j.calendar},d);g.setAttribute("data-cal-index",n);1<h.months&&
(n==Math.max(h.months-1,1)?f.addClassName(g,j.monthFirst):0===n?f.addClassName(g,j.monthLast):f.addClassName(g,j.monthMiddle));k=f.make("div",{"class":j.title},g);f.make("a",{"class":j.previousYear},k);f.make("a",{"class":j.previousMonth},k);f.make("a",{"class":j.nextYear},k);f.make("a",{"class":j.nextMonth},k);u=f.make("span",{"class":j.caption},k);x=f.make("div",{"class":j.header},g);k=0;do r=f.make("span",{},x),r.innerHTML=m[k];while(7>++k);x=f.make("div",{"class":j.days},g);k=0;for(g=[];42>k++;)g.push(f.make("span",
{},x));o.push({caption:u,days:g});n&&f.make("div",{"class":j.monthSeparator},d)}c.draw();f.addEvent(d,"mousedown",function(a,d){var b;if(f.hasClassName(d,j.nextMonth))!c.disableNext&&!1!==c.publish("view-changed",c,["next-month"])&&(c.viewStartDate.add("months",1),c.draw());else if(f.hasClassName(d,j.previousMonth))!c.disablePreviousMonth&&!1!==c.publish("view-changed",c,["previous-month"])&&(c.viewStartDate.subtract("months",1),c.draw());else if(f.hasClassName(d,j.nextYear))!c.disableNext&&!1!==
c.publish("view-changed",c,["next-year"])&&(c.viewStartDate.add("years",1),c.draw());else if(f.hasClassName(d,j.previousYear))!c.disablePreviousMonth&&!1!==c.publish("view-changed",c,["previous-year"])&&(c.viewStartDate.subtract("years",1),c.draw());else if(f.hasClassName(d.parentNode,j.days)&&f.hasClassName(d,j.dayActive)&&(b=d.getAttribute("data-date")))if(b=l(b,h.dayAttributeFormat).hours(12),!1!==c.publish("date-clicked",c,[b]))switch(h.mode){case "multiple":c.addSelected(b)||c.removeSelected(b);
break;case "range":c.addSelected(b);break;default:c.addSelected(b)}return!1});(h.attachTo=f.$(h.attachTo))&&h.attachTo.appendChild(d)}};o.prototype={defaults:{attachTo:null,months:1,weekStart:0,direction:"any",directionScrolling:!0,viewStartDate:null,blackout:null,selected:null,mode:"single",format:null,subscribe:null,columnHeaderLength:2,titleFormat:"MMMM, YYYY",dayNumberFormat:"D",dayAttributeFormat:"YYYY-MM-DD",parseSplitDelimiter:/,\s*|\s+-\s+/,rangeDelimiter:" - ",multipleDelimiter:", ",dateClassMap:{}},
classes:{container:"kalendae",calendar:"k-calendar",monthFirst:"k-first-month",monthMiddle:"k-middle-month",monthLast:"k-last-month",title:"k-title",previousMonth:"k-btn-previous-month",nextMonth:"k-btn-next-month",previousYear:"k-btn-previous-year",nextYear:"k-btn-next-year",caption:"k-caption",header:"k-header",days:"k-days",dayOutOfMonth:"k-out-of-month",dayActive:"k-active",daySelected:"k-selected",dayInRange:"k-range",dayToday:"k-today",monthSeparator:"k-separator",disablePreviousMonth:"k-disable-previous-month-btn",
disableNextMonth:"k-disable-next-month-btn",disablePreviousYear:"k-disable-previous-year-btn",disableNextYear:"k-disable-next-year-btn"},disablePreviousMonth:!1,disableNextMonth:!1,disablePreviousYear:!1,disableNextYear:!1,directions:{past:function(a){return l(a).yearDay()>=r.yearDay()},"today-past":function(a){return l(a).yearDay()>r.yearDay()},any:function(){return!1},"today-future":function(a){return l(a).yearDay()<r.yearDay()},future:function(a){return l(a).yearDay()<=r.yearDay()}},getSelectedAsDates:function(){for(var a=
[],b=0,d=this._sel.length;b<d;b++)a.push(this._sel[b].toDate());return a},getSelectedAsText:function(a){for(var b=[],d=0,e=this._sel.length;d<e;d++)b.push(this._sel[d].format(a||this.settings.format||"YYYY-MM-DD"));return b},getSelectedRaw:function(){for(var a=[],b=0,d=this._sel.length;b<d;b++)a.push(l(this._sel[b]));return a},getSelected:function(a){a=this.getSelectedAsText(a);switch(this.settings.mode){case "range":return a.splice(2),a.join(this.settings.rangeDelimiter);case "multiple":return a.join(this.settings.multipleDelimiter);
default:return a[0]}},isSelected:function(a){a=l(a).yearDay();if(1>a||!this._sel||1>this._sel.length)return!1;switch(this.settings.mode){case "range":var b=this._sel[0]?this._sel[0].yearDay():0,d=this._sel[1]?this._sel[1].yearDay():0;return b===a||d===a?1:!b||!d?0:a>b&&a<d||b<d&&a<b&&a>d?-1:!1;case "multiple":for(b=this._sel.length;b--;)if(this._sel[b].yearDay()===a)return!0;return!1;default:return this._sel[0]&&this._sel[0].yearDay()===a}},setSelected:function(a,b){this._sel=y(a,this.settings.parseSplitDelimiter,
this.settings.format);this._sel.sort(function(a,b){return a.yearDay()-b.yearDay()});!1!==b&&this.draw()},addSelected:function(a,b){a=l(a).hours(12);switch(this.settings.mode){case "multiple":if(this.isSelected(a))return!1;this._sel.push(a);break;case "range":1!==this._sel.length?this._sel=[a]:a.yearDay()>this._sel[0].yearDay()?this._sel[1]=a:this._sel=[a,this._sel[0]];break;default:this._sel=[a]}this._sel.sort(function(a,b){return a.yearDay()-b.yearDay()});this.publish("change",this);!1!==b&&this.draw();
return!0},removeSelected:function(a,b){for(var a=l(a).yearDay(),d=this._sel.length;d--;)if(this._sel[d].yearDay()===a)return this._sel.splice(d,1),this.publish("change",this),!1!==b&&this.draw(),!0;return!1},draw:function(){var a=l(this.viewStartDate).hours(12),b,d=this.classes,e,c,j,h=0,o,u=0,n,m=this.settings;o=this.calendars.length;do{b=l(a).date(1);b.day(b.day()<this.settings.weekStart?this.settings.weekStart-7:this.settings.weekStart);e=this.calendars[h];e.caption.innerHTML=a.format(this.settings.titleFormat);
u=0;do c=e.days[u],j=[],(n=this.isSelected(b))&&j.push({"-1":d.dayInRange,1:d.daySelected,"true":d.daySelected}[n]),b.month()!=a.month()?j.push(d.dayOutOfMonth):(!this.blackout(b)&&!this.direction(b)||0<n)&&j.push(d.dayActive),b.yearDay()===r.yearDay()&&j.push(d.dayToday),n=b.format(this.settings.dayAttributeFormat),m.dateClassMap[n]&&j.push(m.dateClassMap[n]),c.innerHTML=b.format(m.dayNumberFormat),c.className=j.join(" "),c.setAttribute("data-date",n),b.add("days",1);while(42>++u);a.add("months",
1)}while(++h<o);if(m.directionScrolling){if("today-past"===m.direction||"past"===m.direction)b=a.add({m:1}).diff(l(),"months",!0),0>=b?(this.disableNextMonth=!1,f.removeClassName(this.container,d.disableNextMonth)):(this.disableNextMonth=!0,f.addClassName(this.container,d.disableNextMonth));else if("today-future"===m.direction||"future"===m.direction)b=a.subtract({m:1}).diff(l(),"months",!0),b>m.months?(this.disablePreviousMonth=!1,f.removeClassName(this.container,d.disablePreviousMonth)):(this.disablePreviousMonth=
!0,f.addClassName(this.container,d.disablePreviousMonth));if("today-past"===m.direction||"past"===m.direction)b=a.add({m:12}).diff(l(),"months",!0),-11>=b?(this.disableNextYear=!1,f.removeClassName(this.container,d.disableNextYear)):(this.disableNextYear=!0,f.addClassName(this.container,d.disableNextYear));else if("today-future"===m.direction||"future"===m.direction)b=a.subtract({m:12}).diff(l(),"months",!0),b>11+m.months?(this.disablePreviousYear=!1,f.removeClassName(this.container,d.disablePreviousYear)):
(this.disablePreviousYear=!0,f.addClassName(this.container,d.disablePreviousYear))}}};var y=function(a,b,d){var e=[];"string"===typeof a?a=a.split(b):f.isArray(a)||(a=[a]);b=a.length;i=0;do a[i]&&e.push(l(a[i],d).hours(12));while(++i<b);return e};window.Kalendae=o;var f=o.util={isIE8:function(){return!(!/msie 8./i.test(navigator.appVersion)||/opera/i.test(navigator.userAgent)||!window.ActiveXObject||!XDomainRequest||window.msPerformance)},$:function(a){return"string"==typeof a?document.getElementById(a):
a},$$:function(a){return document.querySelectorAll(a)},make:function(a,b,d){var e,a=document.createElement(a);if(b)for(e in b)b.hasOwnProperty(e)&&a.setAttribute(e,b[e]);d&&d.appendChild(a);return a},isVisible:function(a){return 0<a.offsetWidth||0<a.offsetHeight},getStyle:function(a,b){var d;a.currentStyle?d=a.currentStyle[b]:window.getComputedStyle&&(d=window.getComputedStyle(a,null)[b]);return d},domReady:function(a){/in/.test(document.readyState)?setTimeout(function(){f.domReady(a)},9):a()},addEvent:function(a,
b,d){var e=function(b){var b=b||window.event,e=d.apply(a,[b,b.target||b.srcElement]);!1===e&&(b.preventDefault?b.preventDefault():(b.returnValue=!1,b.cancelBubble=!0));return e};a.attachEvent?a.attachEvent("on"+b,e):a.addEventListener(b,e,!1);return e},removeEvent:function(a,b,d){a.detachEvent?a.detachEvent("on"+b,d):a.removeEventListener(b,d,!1)},hasClassName:function(a,b){if(!(a=f.$(a)))return!1;var d=a.className;return 0<d.length&&(d==b||RegExp("(^|\\s)"+b+"(\\s|$)").test(d))},addClassName:function(a,
b){if((a=f.$(a))&&!f.hasClassName(a,b))a.className+=(a.className?" ":"")+b},removeClassName:function(a,b){if(a=f.$(a))a.className=f.trimString(a.className.replace(RegExp("(^|\\s+)"+b+"(\\s+|$)")," "))},isFixed:function(a){do if("fixed"===f.getStyle(a,"position"))return!0;while(a=a.offsetParent);return!1},getPosition:function(a,b){var d=a.offsetLeft,e=a.offsetTop,c={};if(!b)for(;a=a.offsetParent;)d+=a.offsetLeft,e+=a.offsetTop;c[0]=c.left=d;c[1]=c.top=e;return c},getHeight:function(a){return a.offsetHeight||
a.scrollHeight},getWidth:function(a){return a.offsetWidth||a.scrollWidth},trimString:function(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")},merge:function(){for(var a=!0===arguments[0],b={},d=a?1:0;d<arguments.length;d++){var e=b,c=arguments[d];if("object"===typeof c){var f=void 0;for(f in c)c.hasOwnProperty(f)&&(a&&"object"===typeof e[f]&&"object"===typeof c[f]?_update(e[f],c[f]):e[f]=c[f])}}return b},isArray:function(a){return!(!a||!a.length||0===a.length||"object"!==typeof a||!a.constructor||
a.nodeType||a.item)}};"function"===typeof document.addEventListener&&o.util.domReady(function(){for(var a=f.$$(".auto-kal"),b=a.length,d,e;b--;)d=a[b],e=d.getAttribute("data-kal"),e=null==e||""==e?{}:(new Function("return {"+e+"};"))(),"INPUT"===d.tagName?new o.Input(d,e):new o(f.merge(e,{attachTo:d}))});o.Input=function(a,b){if("function"===typeof document.addEventListener){var d=this.input=f.$(a),e;if(!d||"INPUT"!==d.tagName)throw"First argument for Kalendae.Input must be an <input> element or a valid element id.";
var c=this,j=c.classes;opts=c.settings=f.merge(c.defaults,b);opts.attachTo=window.document.body;opts.selected?e=!0:opts.selected=d.value;o.call(c,opts);if(opts.closeButton){var h=f.make("a",{"class":j.closeButton},c.container);f.addEvent(h,"click",function(){d.blur()})}e&&(d.value=c.getSelected());e=c.container;var l=!1;e.style.display="none";f.addClassName(e,j.positioned);f.addEvent(e,"mousedown",function(){l=true});f.addEvent(window.document,"mousedown",function(){l=false});f.addEvent(d,"focus",
function(){c.setSelected(this.value);c.show()});f.addEvent(d,"blur",function(){if(l){l=false;d.focus()}else c.hide()});f.addEvent(d,"keyup",function(){c.setSelected(this.value)});c.subscribe("change",function(){d.value=c.getSelected()})}};o.Input.prototype=f.merge(o.prototype,{defaults:f.merge(o.prototype.defaults,{format:"MM/DD/YYYY",side:"bottom",closeButton:!0,offsetLeft:0,offsetTop:0}),classes:f.merge(o.prototype.classes,{positioned:"k-floating",closeButton:"k-btn-close"}),show:function(){var a=
this.container,b=a.style,d=this.input,e=f.getPosition(d);b.display="";switch(opts.side){case "left":b.left=e.left-f.getWidth(a)+this.settings.offsetLeft+"px";b.top=e.top+this.settings.offsetTop+"px";break;case "right":b.left=e.left+f.getWidth(d)+"px";b.top=e.top+this.settings.offsetTop+"px";break;case "top":b.left=e.left+this.settings.offsetLeft+"px";b.top=e.top-f.getHeight(a)+this.settings.offsetTop+"px";break;default:b.left=e.left+this.settings.offsetLeft+"px",b.top=e.top+f.getHeight(d)+this.settings.offsetTop+
"px"}b.position=f.isFixed(d)?"fixed":"absolute"},hide:function(){this.container.style.display="none"}});var A=function(a){a||(a=this);var b=a.c_||{};a.publish=function(a,e,c){for(var f=(a=b[a])?a.length:0,h;f--;)if(h=a[f].apply(e,c||[]),"boolean"===typeof h)return h};a.subscribe=function(a,e,c){b[a]||(b[a]=[]);c?b[a].push(e):b[a].unshift(e);return[a,e]};a.unsubscribe=function(a){for(var e=b[a[0]],a=a[1],c=e?e.length:0;c--;)e[c]===a&&e.splice(c,1)}},l=o.moment=function(a,b){function d(a,b){this._d=
a;this._isUTC=!!b}function e(a,b){for(var d=a+"";d.length<b;)d="0"+d;return d}function c(t,b,d,c){var f="string"===typeof b,e=f?{}:b;f&&c&&(e[b]=+c);b=(e.ms||e.milliseconds||0)+1E3*(e.s||e.seconds||0)+6E4*(e.m||e.minutes||0)+36E5*(e.h||e.hours||0);c=(e.d||e.days||0)+7*(e.w||e.weeks||0);e=(e.M||e.months||0)+12*(e.y||e.years||0);b&&t.setTime(+t+b*d);c&&t.setDate(t.getDate()+c*d);e&&(b=t.getDate(),t.setDate(1),t.setMonth(t.getMonth()+e*d),t.setDate(Math.min((new a(t.getFullYear(),t.getMonth()+1,0)).getDate(),
b)));return t}function f(a){return"[object Array]"===Object.prototype.toString.call(a)}function h(b){return new a(b[0],b[1]||0,b[2]||1,b[3]||0,b[4]||0,b[5]||0,b[6]||0)}function l(b,d){function c(d){var z;switch(d){case "M":return f+1;case "Mo":return f+1+q(f+1);case "MM":return e(f+1,2);case "MMM":return g.monthsShort[f];case "MMMM":return g.months[f];case "D":return h;case "Do":return h+q(h);case "DD":return e(h,2);case "DDD":return d=new a(j,f,h),z=new a(j,0,1),~~((d-z)/864E5+1.5);case "DDDo":return d=
c("DDD"),d+q(d);case "DDDD":return e(c("DDD"),3);case "d":return k;case "do":return k+q(k);case "ddd":return g.weekdaysShort[k];case "dddd":return g.weekdays[k];case "w":return d=new a(j,f,h-k+5),z=new a(d.getFullYear(),0,4),~~((d-z)/864E5/7+1.5);case "wo":return d=c("w"),d+q(d);case "ww":return e(c("w"),2);case "YY":return e(j%100,2);case "YYYY":return j;case "a":return 11<s?p.pm:p.am;case "A":return 11<s?p.PM:p.AM;case "H":return s;case "HH":return e(s,2);case "h":return s%12||12;case "hh":return e(s%
12||12,2);case "m":return o;case "mm":return e(o,2);case "s":return n;case "ss":return e(n,2);case "zz":case "z":return(b._d.toString().match(G)||[""])[0].replace(H,"");case "Z":return(0>m?"-":"+")+e(~~(Math.abs(m)/60),2)+":"+e(~~(Math.abs(m)%60),2);case "ZZ":return(0>m?"-":"+")+e(~~(10*Math.abs(m)/6),4);case "L":case "LL":case "LLL":case "LLLL":case "LT":return l(b,g.longDateFormat[d]);default:return d.replace(/(^\[)|(\\)|\]$/g,"")}}var f=b.month(),h=b.date(),j=b.year(),k=b.day(),s=b.hours(),o=b.minutes(),
n=b.seconds(),m=-b.zone(),q=g.ordinal,p=g.meridiem;return d.replace(F,c)}function o(b,d){var c=[0,0,1,0,0,0,0],e=0,f=0,j=!1,l=b.match(C),k=d.match(I),m=Math.min(l.length,k.length),n,r;for(n=0;n<m;n++){var q=l[n],p=void 0;switch(k[n]){case "M":case "MM":c[1]=~~q-1;break;case "MMM":case "MMMM":for(p=0;12>p;p++)if(g.monthsParse[p].test(q)){c[1]=p;break}break;case "D":case "DD":case "DDD":case "DDDD":c[2]=~~q;break;case "YY":q=~~q;c[0]=q+(70<q?1900:2E3);break;case "YYYY":c[0]=~~Math.abs(q);break;case "a":case "A":r=
"pm"===q.toLowerCase();break;case "H":case "HH":case "h":case "hh":c[3]=~~q;break;case "m":case "mm":c[4]=~~q;break;case "s":case "ss":c[5]=~~q;break;case "Z":case "ZZ":j=!0,(p=(q||"").match(J))&&p[1]&&(e=~~p[1]),p&&p[2]&&(f=~~p[2]),p&&"+"===p[0]&&(e=-e,f=-f)}}r&&12>c[3]&&(c[3]+=12);!1===r&&12===c[3]&&(c[3]=0);c[3]+=e;c[4]+=f;return j?new a(a.UTC.apply({},c)):h(c)}function n(a,b,d){var c=g.relativeTime[a];return"function"===typeof c?c(b||1,!!d,a):c.replace(/%d/i,b||1)}function m(a,b){g.fn[a]=function(a){var d=
this._isUTC?"UTC":"";return"undefined"!==typeof a?(this._d["set"+d+b](a),this):this._d["get"+d+b]()}}var g,k=Math.round,r={},y="undefined"!==typeof module,v="months monthsShort monthsParse weekdays weekdaysShort longDateFormat calendar relativeTime ordinal meridiem".split(" "),w,A=/^\/?Date\((\-?\d+)/i,F=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|dddd?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|zz?|ZZ?|LT|LL?L?L?)/g,H=/[^A-Z]/g,G=/\([A-Za-z ]+\)|:[0-9]{2} [A-Z]{3} /g,I=/(\\)?(MM?M?M?|dd?d?d|DD?D?D?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|ZZ?|T)/g,
C=/(\\)?([0-9]+|([a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+|([\+\-]\d\d:?\d\d))/gi,K=/\d{4}.\d\d.\d\d(T(\d\d(.\d\d(.\d\d)?)?)?([\+\-]\d\d:?\d\d)?)?/,E=[["HH:mm:ss",/T\d\d:\d\d:\d\d/],["HH:mm",/T\d\d:\d\d/],["HH",/T\d\d/]],J=/([\+\-]|\d\d)/gi,D="Month Date Hours Minutes Seconds Milliseconds".split(" ");g=function(c,e){if(null===c||""===c)return null;var g;if(c&&c._d instanceof a)g=new a(+c._d);else if(e)if(f(e)){var k=c.match(C),n=99,m,r,s;for(m=0;m<e.length;m++){r=o(c,e[m]);s=k;for(var B=l(new d(r),
e[m]).match(C),v=Math.min(s.length,B.length),w=Math.abs(s.length-B.length),q=0,p=void 0,p=0;p<v;p++)~~s[p]!==~~B[p]&&q++;s=q+w;s<n&&(n=s,g=r)}}else g=o(c,e);else if(g=A.exec(c),c===b)g=new a;else if(g)g=new a(+g[1]);else if(c instanceof a)g=c;else if(f(c))g=h(c);else if("string"===typeof c)if(g="YYYY-MM-DDT",K.exec(c)){for(k=0;3>k;k++)if(E[k][1].exec(c)){g+=E[k][0];break}g=o(c,g+"Z")}else g=new a(c);else g=new a(c);return new d(g)};g.utc=function(b,c){return f(b)?new d(new a(a.UTC.apply({},b)),!0):
c&&b?g(b+" 0",c+" Z").utc():g(b).utc()};g.humanizeDuration=function(a,b,c){var a=+a,d=g.relativeTime;switch(b){case "seconds":a*=1E3;break;case "minutes":a*=6E4;break;case "hours":a*=36E5;break;case "days":a*=864E5;break;case "weeks":a*=6048E5;break;case "months":a*=2592E6;break;case "years":a*=31536E6;break;default:c=!!b}var b=!c,e=k(Math.abs(a)/1E3),f=k(e/60),h=k(f/60),j=k(h/24),l=k(j/365),e=45>e&&["s",e]||1===f&&["m"]||45>f&&["mm",f]||1===h&&["h"]||22>h&&["hh",h]||1===j&&["d"]||25>=j&&["dd",j]||
45>=j&&["M"]||345>j&&["MM",k(j/30)]||1===l&&["y"]||["yy",l];e[2]=b;b=n.apply({},e);return c?(0>=a?d.past:d.future).replace(/%s/i,b):b};g.version="1.5.0";g.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";g.lang=function(a,b){var c,d;d=[];if(b){for(c=0;12>c;c++)d[c]=RegExp("^"+b.months[c]+"|^"+b.monthsShort[c].replace(".",""),"i");b.monthsParse=b.monthsParse||d;r[a]=b}if(r[a])for(c=0;c<v.length;c++)d=v[c],g[d]=r[a][d]||g[d];else y&&(c=require("./lang/"+a),g.lang(a,c))};g.lang("en",{months:"January February March April May June July August September October November December".split(" "),
monthsShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},meridiem:{AM:"AM",am:"am",PM:"PM",pm:"pm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",
sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(a){var b=a%10;return 1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th"}});g.isMoment=function(a){return a instanceof d};g.fn=d.prototype={clone:function(){return g(this)},valueOf:function(){return+this._d},"native":function(){return this._d},toString:function(){return this._d.toString()},
toDate:function(){return this._d},utc:function(){this._isUTC=!0;return this},local:function(){this._isUTC=!1;return this},format:function(a){return l(this,a?a:g.defaultFormat)},add:function(a,b){this._d=c(this._d,a,1,b);return this},subtract:function(a,b){this._d=c(this._d,a,-1,b);return this},diff:function(a,b,c){var a=g(a),d=6E4*(this.zone()-a.zone()),d=this._d-a._d-d,e=this.year()-a.year(),f=this.month()-a.month(),a=this.date()-a.date(),b="months"===b?12*e+f+a/30:"years"===b?e+f/12:"seconds"===
b?d/1E3:"minutes"===b?d/6E4:"hours"===b?d/36E5:"days"===b?d/864E5:"weeks"===b?d/6048E5:d;return c?b:k(b)},from:function(a,b){return g.humanizeDuration(this.diff(a),!b)},fromNow:function(a){return this.from(g(),a)},calendar:function(){var a=this.diff(g().sod(),"days",!0),b=g.calendar,c=b.sameElse,a=-6>a?c:-1>a?b.lastWeek:0>a?b.lastDay:1>a?b.sameDay:2>a?b.nextDay:7>a?b.nextWeek:c;return this.format("function"===typeof a?a.apply(this):a)},isLeapYear:function(){var a=this.year();return 0===a%4&&0!==a%
100||0===a%400},isDST:function(){return this.zone()<g([this.year()]).zone()||this.zone()<g([this.year(),5]).zone()},day:function(a){var b=this._d.getDay();return"undefined"===typeof a?b:this.add({d:a-b})},sod:function(){return this.clone().hours(0).minutes(0).seconds(0).milliseconds(0)},eod:function(){return this.sod().add({d:1,ms:-1})},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return this.clone().month(this.month()+1).date(0).date()}};for(w=0;w<D.length;w++)m(D[w].toLowerCase(),
D[w]);m("year","FullYear");return g}(Date);l.fn.stripTime=function(){this._d=new Date(864E5*Math.floor(this._d.valueOf()/864E5));return this};l.fn.yearDay=function(a){var b=Math.floor(this._d/864E5);return"undefined"===typeof a?b:this.add({d:a-b})};r=l().stripTime();"undefined"!==typeof jQuery&&"function"===typeof document.addEventListener&&(jQuery.fn.kalendae=function(a){this.each(function(b,d){"INPUT"===d.tagName?$(d).data("kalendae",new o.Input(d,a)):$(d).data("kalendae",new o($.extend({},{attachTo:d},
a)))});return this})})();
>>>>>>> tagliala/arrows-directions-fix
